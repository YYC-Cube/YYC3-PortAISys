# YYCÂ³ ç»¼åˆæµ‹è¯•æ¡†æ¶

## ğŸ“‹ æ¦‚è¿°

YYCÂ³ ç³»ç»Ÿé‡‡ç”¨å…¨é¢çš„æµ‹è¯•ç­–ç•¥ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€å®‰å…¨æµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ï¼Œç¡®ä¿ç³»ç»Ÿçš„è´¨é‡ã€å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚

## ğŸ§ª æµ‹è¯•ç±»å‹

### 1. å•å…ƒæµ‹è¯• (Unit Tests)

**ä½ç½®**: `tests/unit/`

**ç›®æ ‡**: æµ‹è¯•å•ä¸ªç»„ä»¶ã€å‡½æ•°å’Œç±»çš„åŠŸèƒ½

**è¦†ç›–ç‡ç›®æ ‡**: â‰¥80%

**è¿è¡Œå‘½ä»¤**:

```bash
pnpm test:unit
```

**åŒ…å«çš„æµ‹è¯•**:

- æ ¸å¿ƒç»„ä»¶æµ‹è¯• (AutonomousAIEngine, MessageBus, StateManagerç­‰)
- æ™ºèƒ½ä½“ç³»ç»Ÿæµ‹è¯• (AgentManager, BaseAgentç­‰)
- UIç»„ä»¶æµ‹è¯• (UIManager, LearningSystemç­‰)
- å·¥å…·å’Œè¾…åŠ©å‡½æ•°æµ‹è¯•

### 2. é›†æˆæµ‹è¯• (Integration Tests)

**ä½ç½®**: `tests/integration/`

**ç›®æ ‡**: æµ‹è¯•å¤šä¸ªç»„ä»¶ä¹‹é—´çš„äº¤äº’å’ŒååŒå·¥ä½œ

**è¦†ç›–ç‡ç›®æ ‡**: â‰¥70%

**è¿è¡Œå‘½ä»¤**:

```bash
pnpm test:integration
```

**åŒ…å«çš„æµ‹è¯•**:

- ç³»ç»Ÿé›†æˆæµ‹è¯• (SystemIntegration.test.ts)
- æ™ºèƒ½ä½“ç³»ç»Ÿé›†æˆ (AgentSystemIntegration.integration.test.ts)
- äº‹ä»¶å¤„ç†å’Œé”™è¯¯å¤„ç†é›†æˆ (EventDispatcherErrorHandler.integration.test.ts)
- å­¦ä¹ ç³»ç»Ÿå’Œå†…å­˜é›†æˆ (LearningSystemMemory.integration.test.ts)

### 3. å®‰å…¨æµ‹è¯• (Security Tests)

**ä½ç½®**: `tests/security/`

**ç›®æ ‡**: éªŒè¯ç³»ç»Ÿçš„å®‰å…¨åŠŸèƒ½å’Œé˜²æŠ¤æœºåˆ¶

**è¿è¡Œå‘½ä»¤**:

```bash
pnpm test:security
```

**åŒ…å«çš„æµ‹è¯•**:

- è®¤è¯å’Œæˆæƒæµ‹è¯•
- è¾“å…¥éªŒè¯å’Œæ¸…ç†æµ‹è¯• (SQLæ³¨å…¥ã€XSSã€å‘½ä»¤æ³¨å…¥ç­‰)
- å¨èƒæ£€æµ‹æµ‹è¯•
- åˆè§„æ€§æµ‹è¯• (GDPR, SOC2ç­‰)
- åŠ å¯†å’Œæ•°æ®ä¿æŠ¤æµ‹è¯•

### 4. æ€§èƒ½æµ‹è¯• (Performance Tests)

**ä½ç½®**: `tests/performance/`

**ç›®æ ‡**: éªŒè¯ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡æ˜¯å¦è¾¾æ ‡

**è¿è¡Œå‘½ä»¤**:

```bash
pnpm test:performance
```

**åŒ…å«çš„æµ‹è¯•**:

- å“åº”æ—¶é—´æµ‹è¯• (APIå“åº” <200ms P95)
- ååé‡æµ‹è¯• (QPS â‰¥1000)
- èµ„æºä½¿ç”¨æµ‹è¯• (CPU <70%, å†…å­˜ <80%)
- å¹¶å‘å¤„ç†æµ‹è¯•
- ç¼“å­˜æ€§èƒ½æµ‹è¯•
- å†…å­˜æ³„æ¼æµ‹è¯•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š
pnpm test:all

# æˆ–ä½¿ç”¨shellè„šæœ¬
chmod +x scripts/run-all-tests.sh
./scripts/run-all-tests.sh
```

### è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•

```bash
# åªè¿è¡Œå•å…ƒæµ‹è¯•
pnpm test:unit

# åªè¿è¡Œé›†æˆæµ‹è¯•
pnpm test:integration

# åªè¿è¡Œå®‰å…¨æµ‹è¯•
pnpm test:security

# åªè¿è¡Œæ€§èƒ½æµ‹è¯•
pnpm test:performance
```

### è¿è¡Œæµ‹è¯•è¦†ç›–ç‡

```bash
pnpm test:coverage
```

### æŸ¥çœ‹æµ‹è¯•UI

```bash
pnpm test:ui
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåï¼Œä¼šåœ¨ `test-reports/` ç›®å½•ç”Ÿæˆä»¥ä¸‹æŠ¥å‘Šï¼š

### æŠ¥å‘Šæ ¼å¼

1. **JSONæŠ¥å‘Š** (`test-report.json`)
   - æœºå™¨å¯è¯»çš„å®Œæ•´æµ‹è¯•æ•°æ®
   - é€‚åˆç¨‹åºåŒ–å¤„ç†å’ŒCI/CDé›†æˆ

2. **MarkdownæŠ¥å‘Š** (`test-report.md`)
   - äººç±»å¯è¯»çš„æ–‡æœ¬æŠ¥å‘Š
   - é€‚åˆæ–‡æ¡£å’Œä»£ç ä»“åº“

3. **HTMLæŠ¥å‘Š** (`test-report.html`)
   - äº¤äº’å¼å¯è§†åŒ–æŠ¥å‘Š
   - é€‚åˆåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹

4. **è¦†ç›–ç‡æŠ¥å‘Š** (`coverage/index.html`)
   - è¯¦ç»†çš„ä»£ç è¦†ç›–ç‡æŠ¥å‘Š
   - æ˜¾ç¤ºå“ªäº›ä»£ç è¢«æµ‹è¯•è¦†ç›–

### æŸ¥çœ‹æŠ¥å‘Š

```bash
# æŸ¥çœ‹ç»¼åˆæµ‹è¯•æŠ¥å‘Š
open test-reports/test-report.html

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
open coverage/index.html
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

ç³»ç»Ÿåº”è¯¥è¾¾åˆ°ä»¥ä¸‹æ€§èƒ½æŒ‡æ ‡ï¼š

### å“åº”æ—¶é—´

- APIå“åº”æ—¶é—´: â‰¤200ms (P95)
- é¡µé¢åŠ è½½æ—¶é—´: â‰¤2s (P95)
- åŒæ­¥æ“ä½œæ—¶é—´: â‰¤5s (P95)

### ååé‡

- API QPS: â‰¥1000
- å¹¶å‘ç”¨æˆ·æ•°: â‰¥100
- åŒæ­¥ä»»åŠ¡æ•°: â‰¥50/min

### å¯ç”¨æ€§

- ç³»ç»Ÿå¯ç”¨æ€§: â‰¥99.9%
- æ•°æ®ä¸€è‡´æ€§: â‰¥99.99%
- é”™è¯¯ç‡: â‰¤0.1%

### èµ„æºä½¿ç”¨

- CPUä½¿ç”¨ç‡: â‰¤70%
- å†…å­˜ä½¿ç”¨ç‡: â‰¤80%
- ç£ç›˜I/O: â‰¤80%

## ğŸ”’ å®‰å…¨æµ‹è¯•é‡ç‚¹

### è®¤è¯å’Œæˆæƒ

- âœ… å¯†ç å¼ºåº¦éªŒè¯
- âœ… å¤šå› ç´ è®¤è¯ (MFA)
- âœ… ä¼šè¯ç®¡ç†å’Œè¶…æ—¶
- âœ… è´¦æˆ·é”å®šæœºåˆ¶
- âœ… æƒé™æ§åˆ¶ (RBAC)

### è¾“å…¥éªŒè¯

- âœ… SQLæ³¨å…¥é˜²æŠ¤
- âœ… XSSé˜²æŠ¤
- âœ… å‘½ä»¤æ³¨å…¥é˜²æŠ¤
- âœ… è·¯å¾„éå†é˜²æŠ¤
- âœ… CSRFé˜²æŠ¤

### æ•°æ®ä¿æŠ¤

- âœ… åŠ å¯†ä¼ è¾“ (HTTPS)
- âœ… åŠ å¯†å­˜å‚¨ (AES-256)
- âœ… å¯†ç å“ˆå¸Œ (bcrypt)
- âœ… å®¡è®¡æ—¥å¿—
- âœ… åˆè§„æ€§ (GDPR, SOC2)

## ğŸ› ï¸ CI/CD é›†æˆ

åœ¨CI/CDæµæ°´çº¿ä¸­é›†æˆæµ‹è¯•ï¼š

### GitHub Actions ç¤ºä¾‹

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - uses: pnpm/action-setup@v2
        with:
          version: 8
      
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'pnpm'
      
      - name: Install dependencies
        run: pnpm install
      
      - name: Run tests
        run: pnpm test:all
      
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/coverage-final.json
      
      - name: Upload test reports
        uses: actions/upload-artifact@v3
        with:
          name: test-reports
          path: test-reports/
```

## ğŸ“ ç¼–å†™æµ‹è¯•

### æµ‹è¯•æ–‡ä»¶å‘½åè§„èŒƒ

- å•å…ƒæµ‹è¯•: `*.test.ts`
- é›†æˆæµ‹è¯•: `*.integration.test.ts`
- ç«¯åˆ°ç«¯æµ‹è¯•: `*.e2e.test.ts`

### æµ‹è¯•ç»“æ„

```typescript
import { describe, it, expect, beforeEach, afterEach } from 'vitest';

describe('ç»„ä»¶åç§°', () => {
  // è®¾ç½®
  beforeEach(() => {
    // æµ‹è¯•å‰çš„å‡†å¤‡å·¥ä½œ
  });

  // æ¸…ç†
  afterEach(() => {
    // æµ‹è¯•åçš„æ¸…ç†å·¥ä½œ
  });

  describe('åŠŸèƒ½æè¿°', () => {
    it('åº”è¯¥èƒ½å¤ŸåšæŸäº‹', () => {
      // æµ‹è¯•ä»£ç 
      expect(result).toBe(expected);
    });
  });
});
```

### æµ‹è¯•æœ€ä½³å®è·µ

1. **æµ‹è¯•ç‹¬ç«‹æ€§**: æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–å…¶ä»–æµ‹è¯•
2. **æ¸…æ™°çš„æè¿°**: æµ‹è¯•åç§°åº”è¯¥æ¸…æ¥šæè¿°æµ‹è¯•çš„å†…å®¹
3. **å•ä¸€èŒè´£**: æ¯ä¸ªæµ‹è¯•åªæµ‹è¯•ä¸€ä¸ªåŠŸèƒ½ç‚¹
4. **ä½¿ç”¨Mock**: åˆç†ä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡é¿å…å¤–éƒ¨ä¾èµ–
5. **è¦†ç›–è¾¹ç•Œ**: æµ‹è¯•è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ
6. **æ€§èƒ½è€ƒè™‘**: æµ‹è¯•åº”è¯¥å¿«é€Ÿæ‰§è¡Œ

## ğŸ› è°ƒè¯•æµ‹è¯•

### è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶

```bash
pnpm test tests/unit/core/AutonomousAIEngine.test.ts
```

### è¿è¡Œç‰¹å®šæµ‹è¯•

```bash
pnpm test -t "æµ‹è¯•åç§°"
```

### å¯ç”¨è°ƒè¯•æ¨¡å¼

```bash
pnpm test --inspect-brk
```

### æŸ¥çœ‹è¯¦ç»†è¾“å‡º

```bash
pnpm test --reporter=verbose
```

## ğŸ“š å‚è€ƒèµ„æ–™

- [Vitestæ–‡æ¡£](https://vitest.dev/)
- [æµ‹è¯•æœ€ä½³å®è·µ](https://github.com/goldbergyoni/javascript-testing-best-practices)
- [Node.jsæµ‹è¯•æŒ‡å—](https://nodejs.org/en/docs/guides/testing/)

## ğŸ¤ è´¡çŒ®

åœ¨æäº¤ä»£ç å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡
2. âœ… æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°80%ä»¥ä¸Š
3. âœ… æ–°åŠŸèƒ½æœ‰ç›¸åº”çš„æµ‹è¯•
4. âœ… æ€§èƒ½æµ‹è¯•é€šè¿‡
5. âœ… å®‰å…¨æµ‹è¯•é€šè¿‡

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š

- æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Šä¸­çš„è¯¦ç»†ä¿¡æ¯
- æŸ¥é˜…æ–‡æ¡£ç›®å½•ä¸­çš„ç›¸å…³æ–‡æ¡£
- æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2026-01-20  
**ç»´æŠ¤å›¢é˜Ÿ**: YYCÂ³ AI Team
