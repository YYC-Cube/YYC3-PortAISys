# YYCÂ³ PortAISys - APIæ€»è§ˆ

> ***YanYuCloudCube***
> è¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> ä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **åˆ›å»ºæ—¥æœŸ**: 2026-02-03
> **æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
> **ç»´æŠ¤å›¢é˜Ÿ**: YYCÂ³ äº§å“å›¢é˜Ÿ

---

## ğŸ“‹ ç›®å½•

- [APIæ¦‚è¿°](#apiæ¦‚è¿°)
- [è®¤è¯æ–¹å¼](#è®¤è¯æ–¹å¼)
- [è¯·æ±‚æ ¼å¼](#è¯·æ±‚æ ¼å¼)
- [å“åº”æ ¼å¼](#å“åº”æ ¼å¼)
- [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
- [é€Ÿç‡é™åˆ¶](#é€Ÿç‡é™åˆ¶)
- [ç‰ˆæœ¬æ§åˆ¶](#ç‰ˆæœ¬æ§åˆ¶)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## APIæ¦‚è¿°

### APIç®€ä»‹

YYCÂ³ PortAISysæä¾›äº†ä¸€å¥—å®Œæ•´çš„RESTful APIï¼Œç”¨äºè®¿é—®ç³»ç»Ÿçš„å„ä¸ªæ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€‚APIè®¾è®¡éµå¾ªRESTfulæ¶æ„é£æ ¼ï¼Œæ”¯æŒJSONæ•°æ®æ ¼å¼ï¼Œæä¾›ç»Ÿä¸€çš„å“åº”æ ¼å¼å’Œé”™è¯¯å¤„ç†æœºåˆ¶ã€‚

### è®¾è®¡åŸåˆ™

åŸºäºYYCÂ³ã€Œäº”é«˜äº”æ ‡äº”åŒ–ã€ç†å¿µï¼š

**äº”é«˜**:

- **é«˜å¯ç”¨**: APIæœåŠ¡ç¨³å®šå¯é ï¼Œå¯ç”¨æ€§â‰¥99.9%
- **é«˜æ€§èƒ½**: APIå“åº”å¿«é€Ÿï¼ŒP95å“åº”æ—¶é—´<200ms
- **é«˜å®‰å…¨**: APIå®‰å…¨å¯æ§ï¼Œæ”¯æŒå¤šç§è®¤è¯æ–¹å¼
- **é«˜æ‰©å±•**: APIå¯æ‰©å±•æ€§å¼ºï¼Œæ”¯æŒæ°´å¹³æ‰©å±•
- **é«˜å¯ç»´æŠ¤**: APIæ˜“äºç»´æŠ¤å’Œå‡çº§

**äº”æ ‡**:

- **æ ‡å‡†åŒ–**: APIè®¾è®¡éµå¾ªRESTfulæ ‡å‡†
- **è§„èŒƒåŒ–**: APIå“åº”æ ¼å¼ç»Ÿä¸€è§„èŒƒ
- **è‡ªåŠ¨åŒ–**: APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆå’Œæ›´æ–°
- **æ™ºèƒ½åŒ–**: APIæ”¯æŒæ™ºèƒ½æ¨èå’Œä¼˜åŒ–
- **å¯è§†åŒ–**: APIç›‘æ§å’Œå¯è§†åŒ–

**äº”åŒ–**:

- **æµç¨‹åŒ–**: APIè°ƒç”¨æµç¨‹åŒ–
- **æ–‡æ¡£åŒ–**: APIæ–‡æ¡£å®Œæ•´åŒ–
- **å·¥å…·åŒ–**: APIå¼€å‘å·¥å…·åŒ–
- **æ•°å­—åŒ–**: APIç›‘æ§æ•°å­—åŒ–
- **ç”Ÿæ€åŒ–**: APIç”Ÿæ€åŒ–

### åŸºç¡€ä¿¡æ¯

#### åŸºç¡€URL

```
ç”Ÿäº§ç¯å¢ƒ: https://api.yyc3.com/v1
æµ‹è¯•ç¯å¢ƒ: https://api-staging.yyc3.com/v1
å¼€å‘ç¯å¢ƒ: https://api-dev.yyc3.com/v1
```

#### æ”¯æŒçš„åè®®

- HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨ï¼‰
- HTTP/2ï¼ˆæ¨èï¼‰
- WebSocketï¼ˆå®æ—¶é€šä¿¡ï¼‰

#### æ”¯æŒçš„æ•°æ®æ ¼å¼

- application/jsonï¼ˆæ¨èï¼‰
- application/xml
- multipart/form-dataï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰
- application/x-www-form-urlencoded

---

## è®¤è¯æ–¹å¼

### JWT Tokenè®¤è¯

#### è·å–Token

```http
POST /v1/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

#### ä½¿ç”¨Token

```http
GET /v1/users/me
Authorization: Bearer <your-jwt-token>
```

#### Tokenåˆ·æ–°

```http
POST /v1/auth/refresh
Content-Type: application/json

{
  "refreshToken": "<your-refresh-token>"
}
```

### API Keyè®¤è¯

#### è·å–API Key

```http
POST /v1/api-keys
Authorization: Bearer <your-jwt-token>
Content-Type: application/json

{
  "name": "My API Key",
  "scopes": ["read", "write"],
  "expiresIn": 30
}
```

#### ä½¿ç”¨API Key

```http
GET /v1/data
X-API-Key: <your-api-key>
```

### OAuth 2.0è®¤è¯

#### æˆæƒæµç¨‹

```http
GET /v1/oauth/authorize?
  response_type=code&
  client_id=<client-id>&
  redirect_uri=<redirect-uri>&
  scope=read write&
  state=<state>
```

#### è·å–è®¿é—®ä»¤ç‰Œ

```http
POST /v1/oauth/token
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&
code=<authorization-code>&
redirect_uri=<redirect-uri>&
client_id=<client-id>&
client_secret=<client-secret>
```

#### ä½¿ç”¨è®¿é—®ä»¤ç‰Œ

```http
GET /v1/users/me
Authorization: Bearer <oauth-access-token>
```

---

## è¯·æ±‚æ ¼å¼

### è¯·æ±‚å¤´

#### æ ‡å‡†è¯·æ±‚å¤´

```http
Content-Type: application/json
Authorization: Bearer <token>
Accept: application/json
User-Agent: YYC3-Client/1.0
X-Request-ID: <unique-request-id>
X-Client-Version: 1.0.0
```

#### å¯é€‰è¯·æ±‚å¤´

```http
X-Forwarded-For: <client-ip>
X-Real-IP: <client-ip>
Accept-Language: zh-CN
Accept-Encoding: gzip, deflate
```

### è¯·æ±‚å‚æ•°

#### è·¯å¾„å‚æ•°

```http
GET /v1/users/{userId}
GET /v1/workflows/{workflowId}/executions/{executionId}
```

#### æŸ¥è¯¢å‚æ•°

```http
GET /v1/users?page=1&limit=20&sort=createdAt:desc
GET /v1/workflows?status=active&category=ai
```

#### è¯·æ±‚ä½“

```http
POST /v1/users
Content-Type: application/json

{
  "name": "John Doe",
  "email": "john@example.com",
  "password": "password123"
}
```

### è¯·æ±‚ç¤ºä¾‹

#### GETè¯·æ±‚

```bash
curl -X GET https://api.yyc3.com/v1/users \
  -H "Authorization: Bearer <token>" \
  -H "Accept: application/json"
```

#### POSTè¯·æ±‚

```bash
curl -X POST https://api.yyc3.com/v1/users \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "John Doe",
    "email": "john@example.com"
  }'
```

#### PUTè¯·æ±‚

```bash
curl -X PUT https://api.yyc3.com/v1/users/123 \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Jane Doe"
  }'
```

#### DELETEè¯·æ±‚

```bash
curl -X DELETE https://api.yyc3.com/v1/users/123 \
  -H "Authorization: Bearer <token>"
```

---

## å“åº”æ ¼å¼

### æˆåŠŸå“åº”

```typescript
interface SuccessResponse<T> {
  success: true;
  data: T;
  message: string;
  timestamp: string;
  requestId?: string;
}
```

#### ç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "id": "user-123",
    "name": "John Doe",
    "email": "john@example.com"
  },
  "message": "ç”¨æˆ·åˆ›å»ºæˆåŠŸ",
  "timestamp": "2026-02-03T12:00:00.000Z",
  "requestId": "req-abc123"
}
```

### é”™è¯¯å“åº”

```typescript
interface ErrorResponse {
  success: false;
  error: {
    code: string;
    message: string;
    details?: any;
    stack?: string;
  };
  timestamp: string;
  requestId?: string;
}
```

#### ç¤ºä¾‹

```json
{
  "success": false,
  "error": {
    "code": "E001",
    "message": "ç”¨æˆ·ä¸å­˜åœ¨",
    "details": {
      "userId": "user-123"
    }
  },
  "timestamp": "2026-02-03T12:00:00.000Z",
  "requestId": "req-abc123"
}
```

### åˆ†é¡µå“åº”

```typescript
interface PaginatedResponse<T> {
  success: true;
  data: {
    items: T[];
    pagination: {
      page: number;
      limit: number;
      total: number;
      totalPages: number;
      hasNext: boolean;
      hasPrev: boolean;
    };
  };
  message: string;
  timestamp: string;
}
```

#### ç¤ºä¾‹

```json
{
  "success": true,
  "data": {
    "items": [
      {
        "id": "user-1",
        "name": "User 1"
      },
      {
        "id": "user-2",
        "name": "User 2"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 100,
      "totalPages": 5,
      "hasNext": true,
      "hasPrev": false
    }
  },
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "timestamp": "2026-02-03T12:00:00.000Z"
}
```

---

## é”™è¯¯å¤„ç†

### é”™è¯¯ä»£ç 

#### é€šç”¨é”™è¯¯ä»£ç 

| é”™è¯¯ä»£ç  | HTTPçŠ¶æ€ç  | æè¿° |
|---------|-----------|------|
| **E000** | 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |
| **E001** | 404 | èµ„æºä¸å­˜åœ¨ |
| **E002** | 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| **E003** | 401 | æœªæˆæƒ |
| **E004** | 403 | ç¦æ­¢è®¿é—® |
| **E005** | 409 | èµ„æºå†²çª |
| **E006** | 422 | è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥ |
| **E007** | 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ |

#### è®¤è¯é”™è¯¯ä»£ç 

| é”™è¯¯ä»£ç  | HTTPçŠ¶æ€ç  | æè¿° |
|---------|-----------|------|
| **E100** | 401 | Tokenæ— æ•ˆæˆ–è¿‡æœŸ |
| **E101** | 401 | Tokenæ ¼å¼é”™è¯¯ |
| **E102** | 401 | API Keyæ— æ•ˆ |
| **E103** | 401 | API Keyå·²è¿‡æœŸ |
| **E104** | 401 | ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ |
| **E105** | 401 | è´¦æˆ·å·²è¢«é”å®š |

#### ç”¨æˆ·é”™è¯¯ä»£ç 

| é”™è¯¯ä»£ç  | HTTPçŠ¶æ€ç  | æè¿° |
|---------|-----------|------|
| **E200** | 404 | ç”¨æˆ·ä¸å­˜åœ¨ |
| **E201** | 409 | é‚®ç®±å·²å­˜åœ¨ |
| **E202** | 409 | ç”¨æˆ·åå·²å­˜åœ¨ |
| **E203** | 403 | æƒé™ä¸è¶³ |
| **E204** | 403 | è´¦æˆ·å·²è¢«ç¦ç”¨ |

#### AIé”™è¯¯ä»£ç 

| é”™è¯¯ä»£ç  | HTTPçŠ¶æ€ç  | æè¿° |
|---------|-----------|------|
| **E300** | 500 | AIæœåŠ¡ä¸å¯ç”¨ |
| **E301** | 400 | AIè¯·æ±‚å‚æ•°é”™è¯¯ |
| **E302** | 429 | AIè¯·æ±‚è¿‡äºé¢‘ç¹ |
| **E303** | 500 | AIæ¨¡å‹åŠ è½½å¤±è´¥ |
| **E304** | 400 | AIæ¨ç†è¶…æ—¶ |

### é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

1. **æ£€æŸ¥successå­—æ®µ**: é¦–å…ˆæ£€æŸ¥`success`å­—æ®µåˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸ
2. **å¤„ç†é”™è¯¯ä»£ç **: æ ¹æ®`error.code`è¿›è¡Œç›¸åº”çš„é”™è¯¯å¤„ç†
3. **æ˜¾ç¤ºå‹å¥½æ¶ˆæ¯**: å‘ç”¨æˆ·æ˜¾ç¤º`error.message`è€Œä¸æ˜¯æŠ€æœ¯ç»†èŠ‚
4. **è®°å½•é”™è¯¯æ—¥å¿—**: è®°å½•é”™è¯¯è¯¦æƒ…ç”¨äºè°ƒè¯•å’Œåˆ†æ
5. **å®ç°é‡è¯•æœºåˆ¶**: å¯¹äºä¸´æ—¶æ€§é”™è¯¯å®ç°é‡è¯•æœºåˆ¶

---

## é€Ÿç‡é™åˆ¶

### é™åˆ¶ç­–ç•¥

#### æŒ‰ç”¨æˆ·é™åˆ¶

| ç«¯ç‚¹ç±»å‹ | é™åˆ¶ | æ—¶é—´çª—å£ |
|---------|------|---------|
| **è®¤è¯ç«¯ç‚¹** | 5æ¬¡ | 15åˆ†é’Ÿ |
| **è¯»å–ç«¯ç‚¹** | 100æ¬¡ | 1åˆ†é’Ÿ |
| **å†™å…¥ç«¯ç‚¹** | 20æ¬¡ | 1åˆ†é’Ÿ |
| **AIç«¯ç‚¹** | 10æ¬¡ | 1åˆ†é’Ÿ |

#### æŒ‰IPé™åˆ¶

| ç«¯ç‚¹ç±»å‹ | é™åˆ¶ | æ—¶é—´çª—å£ |
|---------|------|---------|
| **è®¤è¯ç«¯ç‚¹** | 10æ¬¡ | 15åˆ†é’Ÿ |
| **è¯»å–ç«¯ç‚¹** | 200æ¬¡ | 1åˆ†é’Ÿ |
| **å†™å…¥ç«¯ç‚¹** | 40æ¬¡ | 1åˆ†é’Ÿ |
| **AIç«¯ç‚¹** | 20æ¬¡ | 1åˆ†é’Ÿ |

### é€Ÿç‡é™åˆ¶å“åº”

```json
{
  "success": false,
  "error": {
    "code": "E007",
    "message": "è¯·æ±‚è¿‡äºé¢‘ç¹",
    "details": {
      "limit": 100,
      "remaining": 0,
      "reset": "2026-02-03T12:01:00.000Z"
    }
  },
  "timestamp": "2026-02-03T12:00:00.000Z"
}
```

### é€Ÿç‡é™åˆ¶å¤´

```http
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1675406460
```

---

## ç‰ˆæœ¬æ§åˆ¶

### ç‰ˆæœ¬ç­–ç•¥

- APIç‰ˆæœ¬é€šè¿‡URLè·¯å¾„æŒ‡å®šï¼š`/v1/`, `/v2/`
- æ”¯æŒå¤šç‰ˆæœ¬å…±å­˜
- æ–°ç‰ˆæœ¬å‘åå…¼å®¹
- åºŸå¼ƒç‰ˆæœ¬æå‰6ä¸ªæœˆé€šçŸ¥

### ç‰ˆæœ¬é€‰æ‹©

#### é€šè¿‡URL

```http
GET /v1/users
GET /v2/users
```

#### é€šè¿‡è¯·æ±‚å¤´

```http
GET /users
Accept: application/vnd.yyc3.v1+json
```

### ç‰ˆæœ¬å˜æ›´é€šçŸ¥

```json
{
  "success": true,
  "data": {
    "currentVersion": "v1",
    "latestVersion": "v2",
    "deprecatedAt": "2026-08-03T00:00:00.000Z",
    "sunsetAt": "2027-02-03T00:00:00.000Z",
    "migrationGuide": "https://docs.yyc3.com/api/migration-v1-to-v2"
  },
  "message": "APIç‰ˆæœ¬ä¿¡æ¯",
  "timestamp": "2026-02-03T12:00:00.000Z"
}
```

---

## æœ€ä½³å®è·µ

### è¯·æ±‚æœ€ä½³å®è·µ

1. **ä½¿ç”¨HTTPS**: ç”Ÿäº§ç¯å¢ƒå¼ºåˆ¶ä½¿ç”¨HTTPS
2. **è®¾ç½®è¶…æ—¶**: ä¸ºæ‰€æœ‰è¯·æ±‚è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
3. **é‡è¯•æœºåˆ¶**: å¯¹äºä¸´æ—¶æ€§é”™è¯¯å®ç°æŒ‡æ•°é€€é¿é‡è¯•
4. **è¯·æ±‚ID**: ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆå”¯ä¸€çš„è¯·æ±‚ID
5. **å‹ç¼©æ•°æ®**: å¯ç”¨gzipå‹ç¼©å‡å°‘ä¼ è¾“æ•°æ®é‡

### å“åº”å¤„ç†æœ€ä½³å®è·µ

1. **æ£€æŸ¥çŠ¶æ€ç **: é¦–å…ˆæ£€æŸ¥HTTPçŠ¶æ€ç 
2. **éªŒè¯å“åº”æ ¼å¼**: éªŒè¯å“åº”æ•°æ®æ ¼å¼
3. **å¤„ç†é”™è¯¯**: å®ç°å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
4. **ç¼“å­˜å“åº”**: å¯¹å¯ç¼“å­˜çš„å“åº”è¿›è¡Œç¼“å­˜
5. **æ—¥å¿—è®°å½•**: è®°å½•è¯·æ±‚å’Œå“åº”æ—¥å¿—

### å®‰å…¨æœ€ä½³å®è·µ

1. **ä¿æŠ¤å¯†é’¥**: ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥
2. **ä½¿ç”¨HTTPS**: å§‹ç»ˆä½¿ç”¨HTTPSè¿›è¡Œé€šä¿¡
3. **éªŒè¯è¯ä¹¦**: éªŒè¯æœåŠ¡å™¨SSLè¯ä¹¦
4. **é™åˆ¶æƒé™**: ä½¿ç”¨æœ€å°æƒé™åŸåˆ™
5. **å®šæœŸè½®æ¢**: å®šæœŸè½®æ¢APIå¯†é’¥å’ŒToken

---

## ä¸‹ä¸€æ­¥

- [è®¤è¯API](./02-è®¤è¯API.md) - å­¦ä¹ è®¤è¯ç›¸å…³API
- [AIæ™ºèƒ½ä½“API](./03-AIæ™ºèƒ½ä½“API.md) - å­¦ä¹ AIç›¸å…³API
- [å·¥ä½œæµAPI](./04-å·¥ä½œæµAPI.md) - å­¦ä¹ å·¥ä½œæµç›¸å…³API

---

<div align="center">

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
> ã€Œ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***ã€

</div>
