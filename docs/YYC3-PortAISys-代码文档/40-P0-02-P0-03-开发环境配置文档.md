# P0-02/P0-03 开发环境配置文档

**文档名称**: P0-02/P0-03 开发环境配置文档  
**文档版本**: v1.0  
**创建日期**: 2026-06-15  
**最后更新**: 2026-06-15  
**文档状态**: ✅ 已发布  
**负责团队**: 技术团队  
**负责人**: 技术负责人  

---

## 一、环境配置概述

### 1.1 配置目的

本文档旨在为P0-02（深度学习模型优化）和P0-03（故障检测与自愈系统）项目的开发团队提供统一、标准化的开发环境配置指南，确保所有开发人员的工作环境一致，提高开发效率和代码质量。

### 1.2 配置范围

- 开发工具配置（IDE、编辑器、调试工具等）
- 依赖库配置（Python、Node.js、TensorFlow、PyTorch等）
- 数据库配置（PostgreSQL、Redis等）
- 开发服务器配置（开发服务器、测试服务器等）
- CI/CD配置（Jenkins、GitLab CI等）
- 代码质量工具配置（ESLint、Prettier、SonarQube等）

### 1.3 配置目标

- 确保所有开发人员使用统一的开发环境
- 确保所有依赖库版本一致
- 确保所有开发工具配置正确
- 确保所有环境配置可重复、可验证
- 确保环境配置文档与实际配置保持一致

---

## 二、开发工具配置

### 2.1 IDE配置

#### 2.1.1 VS Code配置

**推荐版本**: VS Code 1.85+

**安装步骤**:
1. 下载VS Code安装包：https://code.visualstudio.com/
2. 安装VS Code
3. 安装推荐插件

**推荐插件**:
```json
{
  "recommendations": [
    "ms-python.python",
    "ms-python.vscode-pylance",
    "ms-python.black-formatter",
    "ms-python.isort",
    "ms-python.pylint",
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "eamodio.gitlens",
    "ms-vscode-remote.remote-ssh",
    "ms-azuretools.vscode-docker",
    "redhat.vscode-yaml",
    "streetsidesoftware.code-spell-checker"
  ]
}
```

**VS Code配置**:
```json
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
    "source.organizeImports": true
  },
  "python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python",
  "python.linting.enabled": true,
  "python.linting.pylintEnabled": true,
  "python.formatting.provider": "black",
  "python.formatting.blackArgs": ["--line-length", "100"],
  "files.exclude": {
    "**/__pycache__": true,
    "**/.pytest_cache": true,
    "**/.mypy_cache": true,
    "**/.venv": true,
    "**/node_modules": true
  }
}
```

#### 2.1.2 PyCharm配置

**推荐版本**: PyCharm Professional 2023.3+

**安装步骤**:
1. 下载PyCharm安装包：https://www.jetbrains.com/pycharm/
2. 安装PyCharm
3. 配置Python解释器

**配置Python解释器**:
- 打开File > Settings > Project > Python Interpreter
- 点击Add Interpreter > Add Local Interpreter
- 选择Virtual Environment
- 选择项目根目录下的.venv文件夹

**配置代码风格**:
- 打开File > Settings > Editor > Code Style > Python
- 设置Line Length: 100
- 启用PEP 8检查

### 2.2 编辑器配置

#### 2.2.1 Vim配置

**推荐版本**: Vim 9.0+

**配置文件**: ~/.vimrc

```vim
" 基本配置
set number
set relativenumber
set tabstop=4
set shiftwidth=4
set expandtab
set autoindent
set smartindent
set cursorline
set showmatch
set incsearch
set hlsearch
set ignorecase
set smartcase
set encoding=utf-8
set fileencoding=utf-8

" 插件配置
call plug#begin('~/.vim/plugged')
Plug 'preservim/nerdtree'
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
Plug 'tpope/vim-fugitive'
Plug 'airblade/vim-gitgutter'
Plug 'dense-analysis/ale'
Plug 'junegunn/fzf', { 'do': { -> fzf#install() } }
Plug 'junegunn/fzf.vim'
Plug 'SirVer/ultisnips'
Plug 'honza/vim-snippets'
call plug#end()

" Python配置
let g:ale_linters = {
\   'python': ['flake8', 'mypy'],
\}
let g:ale_fixers = {
\   'python': ['black', 'isort'],
\}
let g:ale_fix_on_save = 1
```

### 2.3 调试工具配置

#### 2.3.1 Python调试器配置

**推荐工具**: pdb、ipdb、pudb

**安装**:
```bash
pip install ipdb pudb
```

**VS Code调试配置**:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Python: Current File",
      "type": "debugpy",
      "request": "launch",
      "program": "${file}",
      "console": "integratedTerminal",
      "justMyCode": true
    },
    {
      "name": "Python: Module",
      "type": "debugpy",
      "request": "launch",
      "module": "enter.module.name",
      "console": "integratedTerminal",
      "justMyCode": true
    }
  ]
}
```

#### 2.3.2 Node.js调试器配置

**推荐工具**: Chrome DevTools、Node.js Inspector

**VS Code调试配置**:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Node.js: Current File",
      "type": "node",
      "request": "launch",
      "program": "${file}",
      "console": "integratedTerminal"
    }
  ]
}
```

---

## 三、依赖库配置

### 3.1 Python环境配置

#### 3.1.1 Python版本

**推荐版本**: Python 3.10+

**安装步骤**:
```bash
# macOS
brew install python@3.10

# Linux
sudo apt-get install python3.10

# Windows
# 从官网下载安装包：https://www.python.org/downloads/
```

**验证安装**:
```bash
python --version
python3 --version
```

#### 3.1.2 虚拟环境配置

**创建虚拟环境**:
```bash
# 使用venv
python -m venv .venv

# 使用conda
conda create -n yyc3-portaisys python=3.10
conda activate yyc3-portaisys
```

**激活虚拟环境**:
```bash
# macOS/Linux
source .venv/bin/activate

# Windows
.venv\Scripts\activate
```

#### 3.1.3 Python依赖库配置

**requirements.txt**:
```txt
# 深度学习框架
torch>=2.0.0
tensorflow>=2.13.0
transformers>=4.30.0

# 数据处理
numpy>=1.24.0
pandas>=2.0.0
scipy>=1.10.0

# 数据库
psycopg2-binary>=2.9.0
redis>=4.5.0
sqlalchemy>=2.0.0

# Web框架
fastapi>=0.100.0
uvicorn>=0.22.0
pydantic>=2.0.0

# 工具库
requests>=2.31.0
python-dotenv>=1.0.0
pyyaml>=6.0.0
python-multipart>=0.0.6

# 测试框架
pytest>=7.4.0
pytest-asyncio>=0.21.0
pytest-cov>=4.1.0

# 代码质量
black>=23.0.0
isort>=5.12.0
flake8>=6.0.0
mypy>=1.4.0
pylint>=2.17.0

# 监控和日志
prometheus-client>=0.17.0
structlog>=23.1.0

# 知识图谱
neo4j>=5.9.0
networkx>=3.1.0

# 强化学习
gymnasium>=0.29.0
stable-baselines3>=2.0.0
```

**安装依赖**:
```bash
pip install -r requirements.txt
```

**导出依赖**:
```bash
pip freeze > requirements.txt
```

### 3.2 Node.js环境配置

#### 3.2.1 Node.js版本

**推荐版本**: Node.js 18+

**安装步骤**:
```bash
# 使用nvm（推荐）
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18

# macOS
brew install node

# Linux
sudo apt-get install nodejs npm

# Windows
# 从官网下载安装包：https://nodejs.org/
```

**验证安装**:
```bash
node --version
npm --version
```

#### 3.2.2 Node.js依赖库配置

**package.json**:
```json
{
  "name": "yyc3-portaisys",
  "version": "1.0.0",
  "description": "YYC³ Portable Intelligent AI System",
  "main": "index.js",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "test": "jest",
    "test:coverage": "jest --coverage"
  },
  "dependencies": {
    "next": "^14.0.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "typescript": "^5.0.0",
    "@types/node": "^20.0.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "axios": "^1.4.0",
    "zustand": "^4.3.0",
    "react-query": "^3.39.0",
    "tailwindcss": "^3.3.0",
    "autoprefixer": "^10.4.0",
    "postcss": "^8.4.0"
  },
  "devDependencies": {
    "eslint": "^8.44.0",
    "eslint-config-next": "^14.0.0",
    "prettier": "^3.0.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "jest": "^29.6.0",
    "@testing-library/react": "^14.0.0",
    "@testing-library/jest-dom": "^5.17.0"
  }
}
```

**安装依赖**:
```bash
npm install
```

### 3.3 深度学习框架配置

#### 3.3.1 PyTorch配置

**安装**:
```bash
# CPU版本
pip install torch torchvision torchaudio

# GPU版本（CUDA 11.8）
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

# GPU版本（CUDA 12.1）
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
```

**验证安装**:
```python
import torch
print(f"PyTorch version: {torch.__version__}")
print(f"CUDA available: {torch.cuda.is_available()}")
if torch.cuda.is_available():
    print(f"CUDA version: {torch.version.cuda}")
    print(f"GPU count: {torch.cuda.device_count()}")
```

#### 3.3.2 TensorFlow配置

**安装**:
```bash
# CPU版本
pip install tensorflow

# GPU版本（CUDA 11.2）
pip install tensorflow[and-cuda]
```

**验证安装**:
```python
import tensorflow as tf
print(f"TensorFlow version: {tf.__version__}")
print(f"GPU available: {tf.config.list_physical_devices('GPU')}")
```

#### 3.3.3 Transformers配置

**安装**:
```bash
pip install transformers datasets tokenizers
```

**验证安装**:
```python
from transformers import AutoTokenizer, AutoModel
print(f"Transformers version: {transformers.__version__}")
```

---

## 四、数据库配置

### 4.1 PostgreSQL配置

#### 4.1.1 安装PostgreSQL

**macOS**:
```bash
brew install postgresql@15
brew services start postgresql@15
```

**Linux**:
```bash
sudo apt-get install postgresql-15
sudo systemctl start postgresql
```

**Windows**:
从官网下载安装包：https://www.postgresql.org/download/windows/

#### 4.1.2 创建数据库

```bash
# 切换到postgres用户
sudo -u postgres psql

# 创建数据库
CREATE DATABASE yyc3_portaisys;

# 创建用户
CREATE USER yyc3_user WITH PASSWORD 'your_password';

# 授权
GRANT ALL PRIVILEGES ON DATABASE yyc3_portaisys TO yyc3_user;

# 退出
\q
```

#### 4.1.3 配置连接

**.env文件**:
```env
DATABASE_URL=postgresql://yyc3_user:your_password@localhost:5432/yyc3_portaisys
```

**Python连接示例**:
```python
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

DATABASE_URL = "postgresql://yyc3_user:your_password@localhost:5432/yyc3_portaisys"

engine = create_engine(DATABASE_URL)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)
Base = declarative_base()
```

### 4.2 Redis配置

#### 4.2.1 安装Redis

**macOS**:
```bash
brew install redis
brew services start redis
```

**Linux**:
```bash
sudo apt-get install redis-server
sudo systemctl start redis
```

**Windows**:
从官网下载安装包：https://redis.io/download/

#### 4.2.2 配置Redis

**redis.conf**:
```conf
# 绑定地址
bind 127.0.0.1

# 端口
port 6379

# 密码
requirepass your_redis_password

# 最大内存
maxmemory 256mb
maxmemory-policy allkeys-lru
```

#### 4.2.3 Python连接示例

```python
import redis

redis_client = redis.Redis(
    host='localhost',
    port=6379,
    password='your_redis_password',
    db=0
)

# 测试连接
redis_client.ping()
```

### 4.3 Neo4j配置（知识图谱）

#### 4.3.1 安装Neo4j

**macOS**:
```bash
brew install neo4j
brew services start neo4j
```

**Linux**:
```bash
wget -O - https://debian.neo4j.com/neotechnology.gpg.key | sudo apt-key add -
echo 'deb https://debian.neo4j.com stable latest' | sudo tee /etc/apt/sources.list.d/neo4j.list
sudo apt-get update
sudo apt-get install neo4j
sudo systemctl start neo4j
```

**Windows**:
从官网下载安装包：https://neo4j.com/download/

#### 4.3.2 配置Neo4j

**neo4j.conf**:
```conf
# 绑定地址
dbms.default_listen_address=0.0.0.0

# HTTP端口
dbms.connector.bolt.listen_address=:7687
dbms.connector.http.listen_address=:7474

# 认证
dbms.security.auth_enabled=true
```

#### 4.3.3 Python连接示例

```python
from neo4j import GraphDatabase

uri = "bolt://localhost:7687"
username = "neo4j"
password = "your_neo4j_password"

driver = GraphDatabase.driver(uri, auth=(username, password))

# 测试连接
with driver.session() as session:
    result = session.run("RETURN 1 AS num")
    print(result.single()["num"])
```

---

## 五、开发服务器配置

### 5.1 开发服务器配置

#### 5.1.1 服务器规格

| 配置项 | 规格 |
|--------|------|
| CPU | 8核 |
| 内存 | 32GB |
| 硬盘 | 500GB SSD |
| 操作系统 | Ubuntu 22.04 LTS |
| 网络 | 1Gbps |

#### 5.1.2 基础环境配置

```bash
# 更新系统
sudo apt-get update
sudo apt-get upgrade -y

# 安装基础工具
sudo apt-get install -y git vim curl wget htop tmux

# 安装Python
sudo apt-get install -y python3.10 python3-pip python3-venv

# 安装Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# 安装Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# 安装Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

#### 5.1.3 项目部署

```bash
# 克隆代码仓库
git clone https://github.com/your-org/yyc3-portaisys.git
cd yyc3-portaisys

# 创建虚拟环境
python3 -m venv .venv
source .venv/bin/activate

# 安装依赖
pip install -r requirements.txt

# 配置环境变量
cp .env.example .env
vim .env

# 初始化数据库
python scripts/init_db.py

# 启动服务
python -m uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### 5.2 测试服务器配置

#### 5.2.1 服务器规格

| 配置项 | 规格 |
|--------|------|
| CPU | 4核 |
| 内存 | 16GB |
| 硬盘 | 200GB SSD |
| 操作系统 | Ubuntu 22.04 LTS |
| 网络 | 1Gbps |

#### 5.2.2 测试环境配置

```bash
# 创建测试数据库
sudo -u postgres psql
CREATE DATABASE yyc3_portaisys_test;
CREATE USER yyc3_test WITH PASSWORD 'test_password';
GRANT ALL PRIVILEGES ON DATABASE yyc3_portaisys_test TO yyc3_test;
\q

# 配置测试环境变量
export DATABASE_URL=postgresql://yyc3_test:test_password@localhost:5432/yyc3_portaisys_test
export ENVIRONMENT=test

# 运行测试
pytest --cov=src --cov-report=html
```

---

## 六、CI/CD配置

### 6.1 Jenkins配置

#### 6.1.1 安装Jenkins

```bash
# 安装Java
sudo apt-get install -y openjdk-11-jdk

# 添加Jenkins仓库
wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -
echo deb https://pkg.jenkins.io/debian-stable binary/ | sudo tee /etc/apt/sources.list.d/jenkins.list

# 安装Jenkins
sudo apt-get update
sudo apt-get install -y jenkins

# 启动Jenkins
sudo systemctl start jenkins
sudo systemctl enable jenkins
```

#### 6.1.2 Jenkins Pipeline配置

**Jenkinsfile**:
```groovy
pipeline {
    agent any
    
    environment {
        PYTHON_VERSION = '3.10'
        NODE_VERSION = '18'
    }
    
    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }
        
        stage('Setup') {
            steps {
                sh '''
                    python3 -m venv .venv
                    . .venv/bin/activate
                    pip install -r requirements.txt
                    npm install
                '''
            }
        }
        
        stage('Lint') {
            steps {
                sh '''
                    . .venv/bin/activate
                    flake8 src/
                    pylint src/
                    eslint src/
                '''
            }
        }
        
        stage('Test') {
            steps {
                sh '''
                    . .venv/bin/activate
                    pytest --cov=src --cov-report=xml
                    npm test
                '''
            }
        }
        
        stage('Build') {
            steps {
                sh '''
                    . .venv/bin/activate
                    python -m build
                    npm run build
                '''
            }
        }
        
        stage('Deploy') {
            when {
                branch 'main'
            }
            steps {
                sh '''
                    docker build -t yyc3-portaisys:${BUILD_NUMBER} .
                    docker push registry.example.com/yyc3-portaisys:${BUILD_NUMBER}
                '''
            }
        }
    }
    
    post {
        always {
            junit '**/test-results/**/*.xml'
            publishHTML(target: [
                reportDir: 'htmlcov',
                reportFiles: 'index.html',
                reportName: 'Coverage Report'
            ])
        }
        success {
            emailext(
                subject: "Jenkins Build ${currentBuild.fullDisplayName} - Success",
                body: "Build ${env.BUILD_URL} is successful.",
                to: '${env.CHANGE_AUTHOR_EMAIL}'
            )
        }
        failure {
            emailext(
                subject: "Jenkins Build ${currentBuild.fullDisplayName} - Failed",
                body: "Build ${env.BUILD_URL} is failed.",
                to: '${env.CHANGE_AUTHOR_EMAIL}'
            )
        }
    }
}
```

### 6.2 GitLab CI配置

**.gitlab-ci.yml**:
```yaml
stages:
  - lint
  - test
  - build
  - deploy

variables:
  PYTHON_VERSION: "3.10"
  NODE_VERSION: "18"

before_script:
  - python3 -m venv .venv
  - . .venv/bin/activate
  - pip install -r requirements.txt
  - npm install

lint:python:
  stage: lint
  script:
    - flake8 src/
    - pylint src/
    - mypy src/

lint:javascript:
  stage: lint
  script:
    - eslint src/

test:python:
  stage: test
  script:
    - pytest --cov=src --cov-report=xml
  coverage: '/TOTAL.*\s+(\d+%)$/'
  artifacts:
    reports:
      coverage_report:
        coverage_format: cobertura
        path: coverage.xml

test:javascript:
  stage: test
  script:
    - npm test -- --coverage
  coverage: '/All files[^|]*\|[^|]*\s+([\d\.]+)/'

build:
  stage: build
  script:
    - python -m build
    - npm run build
  artifacts:
    paths:
      - dist/
      - build/

deploy:staging:
  stage: deploy
  only:
    - develop
  script:
    - docker build -t yyc3-portaisys:$CI_COMMIT_SHA .
    - docker push registry.example.com/yyc3-portaisys:$CI_COMMIT_SHA

deploy:production:
  stage: deploy
  only:
    - main
  script:
    - docker build -t yyc3-portaisys:$CI_COMMIT_SHA .
    - docker push registry.example.com/yyc3-portaisys:$CI_COMMIT_SHA
    - kubectl set image deployment/yyc3-portaisys yyc3-portaisys=registry.example.com/yyc3-portaisys:$CI_COMMIT_SHA
```

---

## 七、代码质量工具配置

### 7.1 ESLint配置

**.eslintrc.json**:
```json
{
  "env": {
    "browser": true,
    "es2021": true,
    "node": true
  },
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended",
    "next/core-web-vitals"
  ],
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "ecmaFeatures": {
      "jsx": true
    },
    "ecmaVersion": "latest",
    "sourceType": "module"
  },
  "plugins": [
    "@typescript-eslint",
    "react",
    "react-hooks"
  ],
  "rules": {
    "react/react-in-jsx-scope": "off",
    "@typescript-eslint/no-unused-vars": ["error", { "argsIgnorePattern": "^_" }],
    "no-console": ["warn", { "allow": ["warn", "error"] }]
  }
}
```

### 7.2 Prettier配置

**.prettierrc**:
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false,
  "arrowParens": "always"
}
```

### 7.3 Black配置

**pyproject.toml**:
```toml
[tool.black]
line-length = 100
target-version = ['py310']
include = '\.pyi?$'
extend-exclude = '''
/(
  # directories
  \.eggs
  | \.git
  | \.hg
  | \.mypy_cache
  | \.tox
  | \.venv
  | build
  | dist
)/
'''
```

### 7.4 isort配置

**pyproject.toml**:
```toml
[tool.isort]
profile = "black"
line_length = 100
multi_line_output = 3
include_trailing_comma = true
force_grid_wrap = 0
use_parentheses = true
ensure_newline_before_comments = true
```

### 7.5 Flake8配置

**setup.cfg**:
```ini
[flake8]
max-line-length = 100
extend-ignore = E203, W503
exclude = 
    .git,
    __pycache__,
    .venv,
    build,
    dist
max-complexity = 10
```

### 7.6 Pylint配置

**.pylintrc**:
```ini
[MASTER]
disable=
    C0111,
    C0103,
    R0903

[FORMAT]
max-line-length=100

[DESIGN]
max-args=7
max-locals=15
max-returns=6
max-branches=12
max-statements=50
```

### 7.7 MyPy配置

**mypy.ini**:
```ini
[mypy]
python_version = 3.10
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True

[mypy-tests.*]
disallow_untyped_defs = False
```

### 7.8 SonarQube配置

**sonar-project.properties**:
```properties
sonar.projectKey=yyc3-portaisys
sonar.projectName=YYC³ PortAISys
sonar.projectVersion=1.0
sonar.sources=src
sonar.tests=tests
sonar.python.version=3.10
sonar.sourceEncoding=UTF-8
sonar.coverage.exclusions=**/tests/**,**/migrations/**
sonar.python.coverage.reportPaths=coverage.xml
sonar.python.pylint.reportPaths=pylint-report.txt
```

---

## 八、环境验证

### 8.1 Python环境验证

```bash
# 检查Python版本
python --version

# 检查虚拟环境
which python
python -c "import sys; print(sys.executable)"

# 检查依赖库
pip list

# 检查代码质量工具
black --version
isort --version
flake8 --version
pylint --version
mypy --version

# 检查测试框架
pytest --version

# 检查深度学习框架
python -c "import torch; print(f'PyTorch: {torch.__version__}')"
python -c "import tensorflow as tf; print(f'TensorFlow: {tf.__version__}')"
python -c "import transformers; print(f'Transformers: {transformers.__version__}')"
```

### 8.2 Node.js环境验证

```bash
# 检查Node.js版本
node --version

# 检查npm版本
npm --version

# 检查依赖
npm list --depth=0

# 检查代码质量工具
eslint --version
prettier --version

# 检查测试框架
npm test -- --version
```

### 8.3 数据库环境验证

```bash
# 检查PostgreSQL
psql --version
psql -U yyc3_user -d yyc3_portaisys -c "SELECT version();"

# 检查Redis
redis-cli --version
redis-cli -a your_redis_password ping

# 检查Neo4j
cypher-shell -u neo4j -p your_neo4j_password "RETURN 1 AS num"
```

### 8.4 开发工具验证

```bash
# 检查Git
git --version

# 检查Docker
docker --version
docker ps

# 检查Docker Compose
docker-compose --version

# 检查VS Code
code --version
```

### 8.5 综合验证脚本

**scripts/verify_environment.sh**:
```bash
#!/bin/bash

echo "=== 环境验证脚本 ==="
echo ""

# Python环境
echo "=== Python环境 ==="
python --version
python -c "import torch; print(f'PyTorch: {torch.__version__}')"
python -c "import tensorflow as tf; print(f'TensorFlow: {tf.__version__}')"
echo ""

# Node.js环境
echo "=== Node.js环境 ==="
node --version
npm --version
echo ""

# 数据库环境
echo "=== 数据库环境 ==="
psql --version
redis-cli --version
echo ""

# 开发工具
echo "=== 开发工具 ==="
git --version
docker --version
docker-compose --version
echo ""

echo "=== 环境验证完成 ==="
```

**运行验证脚本**:
```bash
chmod +x scripts/verify_environment.sh
./scripts/verify_environment.sh
```

---

## 九、常见问题解决方案

### 9.1 Python相关问题

#### 问题1: ImportError: No module named 'xxx'

**解决方案**:
```bash
pip install xxx
```

#### 问题2: pip install失败

**解决方案**:
```bash
# 使用国内镜像
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple xxx

# 升级pip
pip install --upgrade pip
```

#### 问题3: 虚拟环境激活失败

**解决方案**:
```bash
# macOS/Linux
source .venv/bin/activate

# Windows
.venv\Scripts\activate

# 如果失败，重新创建虚拟环境
rm -rf .venv
python -m venv .venv
```

### 9.2 Node.js相关问题

#### 问题1: npm install失败

**解决方案**:
```bash
# 清除缓存
npm cache clean --force

# 使用国内镜像
npm config set registry https://registry.npmmirror.com

# 删除node_modules重新安装
rm -rf node_modules package-lock.json
npm install
```

#### 问题2: 端口被占用

**解决方案**:
```bash
# 查找占用端口的进程
lsof -i :3000

# 杀死进程
kill -9 <PID>
```

### 9.3 数据库相关问题

#### 问题1: PostgreSQL连接失败

**解决方案**:
```bash
# 检查PostgreSQL服务状态
sudo systemctl status postgresql

# 启动PostgreSQL服务
sudo systemctl start postgresql

# 检查连接
psql -U yyc3_user -d yyc3_portaisys
```

#### 问题2: Redis连接失败

**解决方案**:
```bash
# 检查Redis服务状态
sudo systemctl status redis

# 启动Redis服务
sudo systemctl start redis

# 测试连接
redis-cli ping
```

### 9.4 Docker相关问题

#### 问题1: Docker权限问题

**解决方案**:
```bash
# 将用户添加到docker组
sudo usermod -aG docker $USER

# 重新登录或执行
newgrp docker
```

#### 问题2: Docker容器无法启动

**解决方案**:
```bash
# 查看容器日志
docker logs <container_id>

# 查看容器状态
docker ps -a

# 删除容器重新创建
docker rm -f <container_id>
docker-compose up -d
```

---

## 十、附录

### 10.1 相关文档

- [P0-02/P0-03 开发实施阶段启动文档](file:///Users/my/yyc3-Portable-Intelligent-AI-System/docs/YYC3-PortAISys-代码文档/40-P0-02-P0-03-开发实施阶段启动文档.md)
- [P0-02/P0-03 开发实施阶段详细执行计划](file:///Users/my/yyc3-Portable-Intelligent-AI-System/docs/YYC3-PortAISys-代码文档/40-P0-02-P0-03-开发实施阶段详细执行计划.md)
- [P0-02/P0-03 Git版本控制流程文档](file:///Users/my/yyc3-Portable-Intelligent-AI-System/docs/YYC3-PortAISys-代码文档/40-P0-02-P0-03-Git版本控制流程文档.md)
- [P0-02/P0-03 代码评审流程文档](file:///Users/my/yyc3-Portable-Intelligent-AI-System/docs/YYC3-PortAISys-代码文档/40-P0-02-P0-03-代码评审流程文档.md)

### 10.2 联系方式

| 角色 | 姓名 | 邮箱 | 电话 |
|------|------|------|------|
| 技术负责人 | 王五 | wangwu@example.com | 13800000002 |
| 运维人员 | 王十二 | wangshier@example.com | 13800000012 |

### 10.3 变更记录

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| v1.0 | 2026-06-15 | 初始版本创建 | 技术负责人 |

---

**文档结束**
